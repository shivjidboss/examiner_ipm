function previewImage(a,b,c){var d=a.files,e=document.getElementsByClassName("imagePreview")[0];e.innerHTML="<br><br><br><center>Loading...</center>";var f=d[0],g=/image.*/,h=detectDevice();if(!h.android&&!f.type.match(g)){var i=document.createElement("p");return e.innerHTML="",i.innerHTML="This is not valid Image file",void e.appendChild(i)}var j="",k=new FileReader;k.onload=function(a){return function(a){e.innerHTML="";var d=a.target.result.split(";");if(d=d[0].split("/"),d=d[1].toUpperCase(),h.android&&(d=f.name.split("."),d=d[d.length-1].toUpperCase()),("JPG"==d||"JPEG"==d||"PNG"==d||"GIF"==d)&&a.total<1024*c*1024)for(var g in b){var i=document.createElement("img"),j=a.target.result;h.android&&(j=j.split(":"),"base"==j[1].substr(0,4)&&(j=j[0]+":image/"+d.toLowerCase()+";"+j[1])),i.src=j,i.width=b[g],i.className="pro-pic",i.title="Image preview "+b[g]+"px",e.appendChild(i)}var k=document.createElement("p");k.innerHTML="<br />This is a <b>"+d+"</b> image, size of <b>"+(a.total/1024).toFixed(2)+"</b> KB.","JPG"!==d&&"JPEG"!==d&&"PNG"!==d&&"GIF"!==d||a.total>1024*c*1024?k.innerHTML+='<br /><span style="color:red;">Which is wrong format / size! Accepted formats: JPG, PNG, GIF. Size limit is: '+c+"MB</span>":k.innerHTML+='<br /><span style="color:green;">Picture seems to be fine for upload.</span>'}}(j),k.readAsDataURL(f)}function detectDevice(){var a=navigator.userAgent,b={apple:a.match(/(iPhone|iPod|iPad)/),blackberry:a.match(/BlackBerry/),android:a.match(/Android/),microsoft:a.match(/Windows Phone/),zune:a.match(/ZuneWP7/)};return b}